
> homeopathy-business-platform@0.2.0 dev:app
> next dev

   ▲ Next.js 15.5.6
   - Local:        http://localhost:3000
   - Network:      http://192.168.1.3:3000
   - Environments: .env.local, .env

 ✓ Starting...
 ✓ Ready in 2.7s
 ○ Compiling /middleware ...
 ✓ Compiled /middleware in 1313ms (159 modules)
 ○ Compiling / ...
 ✓ Compiled / in 10.2s (1224 modules)
 GET / 200 in 2357ms
 GET / 200 in 214ms
 GET / 200 in 251ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 997ms (1296 modules)
 GET /api/auth/me 200 in 1343ms
 ○ Compiling /dashboard ...
 ✓ Compiled /dashboard in 5.8s (2876 modules)
 GET /dashboard 200 in 6238ms
 GET /dashboard 200 in 146ms
 ○ Compiling /api/vendors ...
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 ✓ Compiled /api/vendors in 1883ms (2880 modules)
 GET /api/vendors 200 in 2135ms
 GET /api/customers 200 in 2214ms
 GET /dashboard 200 in 1944ms
 GET /api/customers 200 in 135ms
 GET /api/vendors 200 in 346ms
 GET /api/auth/me 200 in 384ms
 GET /dashboard 200 in 294ms
 GET /api/customers 200 in 112ms
 GET /api/vendors 200 in 236ms
 GET /api/auth/me 200 in 253ms
 GET /dashboard 200 in 263ms
 GET /api/customers 200 in 281ms
 GET /api/vendors 200 in 355ms
 GET /api/auth/me 200 in 300ms
 GET /dashboard 200 in 352ms
 GET /api/customers 200 in 160ms
 GET /api/vendors 200 in 281ms
 GET /api/auth/me 200 in 288ms
 ✓ Compiled in 923ms (2771 modules)
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 GET /dashboard 200 in 845ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 799ms (1520 modules)
 ✓ Compiled (1600 modules)
 GET /api/vendors 200 in 1245ms
 GET /api/auth/me 200 in 1214ms
 GET /api/customers 200 in 1334ms
 GET /dashboard 200 in 673ms
 GET /api/customers 200 in 121ms
 GET /api/vendors 200 in 238ms
 GET /api/auth/me 200 in 288ms
 GET /dashboard 200 in 333ms
 GET /api/customers 200 in 150ms
 GET /api/vendors 200 in 342ms
 GET /api/auth/me 200 in 310ms
 GET /dashboard 200 in 304ms
 GET /api/customers 200 in 148ms
 GET /api/vendors 200 in 516ms
 GET /api/auth/me 200 in 534ms
 GET /dashboard 200 in 260ms
 GET /api/customers 200 in 154ms
 GET /api/vendors 200 in 339ms
 GET /api/auth/me 200 in 305ms
 ✓ Compiled in 1798ms (2869 modules)
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 GET /dashboard 200 in 751ms
 GET /api/customers 200 in 141ms
 GET /api/vendors 200 in 238ms
 GET /api/auth/me 200 in 272ms
 ✓ Compiled in 984ms (2869 modules)
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 ⨯ ReferenceError: lowStock is not defined
    at DashboardPage (app/dashboard/page.tsx:410:14)
  408 |           <CardContent className="space-y-4">
  409 |             {/* Low Stock Alerts */}
> 410 |             {lowStock.length > 0 && (
      |              ^
  411 |               <Alert>
  412 |                 <AlertTriangle className="h-4 w-4" />
  413 |                 <AlertDescription> {
  digest: '158844135'
}
 GET /dashboard 500 in 818ms
 ✓ Compiled in 641ms (2869 modules)
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 GET /dashboard 200 in 704ms
 GET /api/customers 200 in 129ms
 GET /api/vendors 200 in 197ms
 GET /api/auth/me 200 in 227ms
 GET /dashboard 200 in 306ms
 GET /api/customers 200 in 163ms
 GET /api/vendors 200 in 273ms
 GET /api/auth/me 200 in 251ms
 ○ Compiling /products ...
 ✓ Compiled /products in 1945ms (2792 modules)
 GET /products 200 in 2360ms
 ○ Compiling /products/subcategories ...
 ✓ Compiled /products/subcategories in 754ms (2822 modules)
 GET /products/subcategories 200 in 964ms
 ○ Compiling /products/units ...
 ✓ Compiled /products/units in 578ms (2833 modules)
 GET /products/units 200 in 750ms
 ○ Compiling /products/batches ...
 ✓ Compiled /products/batches in 553ms (2842 modules)
 GET /products/batches 200 in 720ms
 ✓ Compiled in 2.6s (2824 modules)
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 GET /products/batches 200 in 933ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 3.1s (1620 modules)
 GET /api/auth/me 200 in 3491ms
 ○ Compiling /products/barcode ...
 ✓ Compiled /products/barcode in 1815ms (2937 modules)
 GET /products/barcode 200 in 2204ms
 GET /products/batches 200 in 154ms
 ○ Compiling /settings/global ...
 ✓ Compiled /settings/global in 1747ms (2962 modules)
 GET /settings/global 200 in 2950ms
 ○ Compiling /settings/payments ...
 ✓ Compiled /settings/payments in 2.1s (2882 modules)
 GET /settings/payments 200 in 2455ms
 GET /settings/payments 200 in 533ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 734ms (1009 modules)
 GET /api/auth/me 200 in 1005ms
 GET /products 200 in 183ms
 ○ Compiling /products/add ...
 ✓ Compiled /products/add in 1313ms (2250 modules)
 GET /products/add 200 in 1727ms
 GET /products/add 200 in 580ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 792ms (1011 modules)
 GET /api/auth/me 200 in 1036ms
 GET /products/add 200 in 751ms
 GET /api/auth/me 200 in 162ms
 ○ Compiling /inventory/stock ...
 ✓ Compiled /inventory/stock in 2.9s (2350 modules)
 GET /inventory/stock 200 in 3231ms
 ○ Compiling /purchases/orders ...
 ✓ Compiled /purchases/orders in 1801ms (2258 modules)
 GET /purchases/orders 200 in 2114ms
 ○ Compiling /purchases/orders/create ...
 ✓ Compiled /purchases/orders/create in 535ms (2254 modules)
 GET /purchases/orders/create 200 in 738ms
 ○ Compiling /purchases/returns ...
 ✓ Compiled /purchases/returns in 731ms (2255 modules)
 GET /purchases/returns 200 in 907ms
 ○ Compiling /purchases/grn ...
 ✓ Compiled /purchases/grn in 547ms (2262 modules)
 GET /purchases/grn 200 in 785ms
 ○ Compiling /_not-found ...
 ✓ Compiled /_not-found in 1204ms (2265 modules)
 GET /api/purchases/grn 404 in 1633ms
 GET /api/purchases/grn 404 in 171ms
 GET /purchases/orders 200 in 115ms
 GET /purchases/grn 200 in 115ms
 GET /api/purchases/grn 404 in 151ms
 GET /api/purchases/grn 404 in 109ms
 ○ Compiling /purchases/bills ...
 ✓ Compiled /purchases/bills in 1717ms (2275 modules)
 GET /purchases/bills 200 in 1913ms
 GET /purchases/grn 200 in 121ms
 GET /purchases/orders 200 in 127ms
 GET /purchases/grn 200 in 132ms
 GET /api/purchases/grn 404 in 362ms
 GET /api/purchases/grn 404 in 148ms
 GET /purchases/orders 200 in 123ms
 GET /purchases/grn 200 in 127ms
 GET /api/purchases/grn 404 in 161ms
 GET /api/purchases/grn 404 in 146ms
 GET /purchases/orders 200 in 115ms
 ○ Compiling /dashboard ...
 ✓ Compiled /dashboard in 2.5s (1540 modules)
 GET /dashboard 200 in 2735ms
 ○ Compiling /api/vendors ...
 ✓ Compiled /api/vendors in 993ms (1558 modules)
 ✓ Compiled (1560 modules)
 GET /api/vendors 200 in 1521ms
 GET /api/customers 200 in 1613ms
 ○ Compiling /products/add ...
 ✓ Compiled /products/add in 636ms (1567 modules)
 GET /products/add 200 in 950ms
 ✓ Compiled in 4.3s (2886 modules)
 ○ Compiling /products ...
 ✓ Compiled /products in 1279ms (1547 modules)
 GET /products 200 in 1585ms
 GET /products 200 in 512ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 1790ms (1636 modules)
 GET /api/auth/me 200 in 2064ms
 GET /products/add 200 in 203ms
 GET /products 200 in 126ms
 GET /products 200 in 541ms
 GET /api/auth/me 200 in 126ms
 ○ Compiling /products/subcategories ...
 ✓ Compiled /products/subcategories in 2.1s (1555 modules)
 GET /products/subcategories 200 in 2463ms
 ○ Compiling /products/brands ...
 ✓ Compiled /products/brands in 3s (2902 modules)
 GET /products/brands 200 in 3278ms
 GET /products/brands 200 in 580ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 520ms (1643 modules)
 GET /api/auth/me 200 in 764ms
 GET /products/brands 200 in 621ms
 GET /api/auth/me 200 in 135ms
 GET /products 200 in 191ms
 GET /products 200 in 346ms
 ✓ Compiled in 2.9s (3056 modules)
 GET /products 200 in 699ms
 GET /products 200 in 327ms
 ✓ Compiled in 1866ms (3056 modules)
 GET /products 200 in 219ms
 GET /products 200 in 316ms
 ✓ Compiled in 1029ms (3056 modules)
 GET /products 200 in 183ms
 GET /products 200 in 306ms
 ✓ Compiled in 891ms (3056 modules)
 GET /products 200 in 210ms
 GET /products 200 in 376ms
 ✓ Compiled in 1978ms (3056 modules)
 GET /products 200 in 271ms
 GET /products 200 in 332ms
 ✓ Compiled in 880ms (3056 modules)
 GET /products 200 in 203ms
 ○ Compiling /purchases/upload ...
 ✓ Compiled /purchases/upload in 4.1s (2909 modules)
 GET /purchases/upload 200 in 5305ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 1466ms (1651 modules)
 GET /api/auth/me 200 in 2133ms
 ○ Compiling /inventory/stock ...
 ✓ Compiled /inventory/stock in 996ms (1013 modules)
 GET /inventory/stock 200 in 1680ms
 GET /api/auth/me 200 in 173ms
 GET /purchases/upload 200 in 141ms
 ○ Compiling /admin/approvals ...
 ✓ Compiled /admin/approvals in 5.1s (2275 modules)
 GET /admin/approvals 200 in 5939ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 1327ms (2375 modules)
 GET /api/auth/me 200 in 1761ms
Database query error: Error: getaddrinfo EAI_AGAIN postgres
    at async query (lib/database.ts:76:20)
    at async GET (app/api/uploads/purchase/route.ts:314:20)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  errno: -3001,
  code: 'EAI_AGAIN',
  syscall: 'getaddrinfo',
  hostname: 'postgres'
}
Query: 
      SELECT * FROM upload_sessions
      WHERE upload_type = $1
     AND approval_status = $2 ORDER BY created_at DESC
Params: [ 'purchase', 'pending' ]
Fetch error: Error: getaddrinfo EAI_AGAIN postgres
    at async query (lib/database.ts:76:20)
    at async GET (app/api/uploads/purchase/route.ts:314:20)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  errno: -3001,
  code: 'EAI_AGAIN',
  syscall: 'getaddrinfo',
  hostname: 'postgres'
}
 GET /api/uploads/purchase?status=pending 500 in 2125ms
 ○ Compiling /api/uploads/inventory ...
 ✓ Compiled /api/uploads/inventory in 668ms (2377 modules)
Database query error: Error: Connection terminated due to connection timeout
    at async query (lib/database.ts:76:20)
    at async GET (app/api/uploads/inventory/route.ts:234:20)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  [cause]: [Error: Connection terminated unexpectedly]
}
Query: 
      SELECT * FROM upload_sessions
      WHERE upload_type = 'inventory'
     AND approval_status = $1 ORDER BY created_at DESC
Params: [ 'pending' ]
Fetch error: Error: Connection terminated due to connection timeout
    at async query (lib/database.ts:76:20)
    at async GET (app/api/uploads/inventory/route.ts:234:20)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  [cause]: [Error: Connection terminated unexpectedly]
}
 GET /api/uploads/inventory?status=pending 500 in 3064ms
 ○ Compiling /inventory/upload ...
 ✓ Compiled /inventory/upload in 1715ms (2375 modules)
 GET /inventory/upload 200 in 2349ms
 GET /api/auth/me 200 in 183ms
 GET /purchases/upload 200 in 292ms
 GET /api/auth/me 200 in 131ms
 ✓ Compiled in 5.9s (2252 modules)
 ✓ Compiled in 1811ms (2254 modules)
