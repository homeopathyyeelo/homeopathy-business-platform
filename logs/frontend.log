
> homeopathy-business-platform@0.2.0 dev:app
> next dev

   ▲ Next.js 15.5.6
   - Local:        http://localhost:3000
   - Network:      http://192.168.1.3:3000
   - Environments: .env.local, .env

 ✓ Starting...
 ✓ Ready in 2.7s
 ○ Compiling /middleware ...
 ✓ Compiled /middleware in 1313ms (159 modules)
 ○ Compiling / ...
 ✓ Compiled / in 10.2s (1224 modules)
 GET / 200 in 2357ms
 GET / 200 in 214ms
 GET / 200 in 251ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 997ms (1296 modules)
 GET /api/auth/me 200 in 1343ms
 ○ Compiling /dashboard ...
 ✓ Compiled /dashboard in 5.8s (2876 modules)
 GET /dashboard 200 in 6238ms
 GET /dashboard 200 in 146ms
 ○ Compiling /api/vendors ...
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 ✓ Compiled /api/vendors in 1883ms (2880 modules)
 GET /api/vendors 200 in 2135ms
 GET /api/customers 200 in 2214ms
 GET /dashboard 200 in 1944ms
 GET /api/customers 200 in 135ms
 GET /api/vendors 200 in 346ms
 GET /api/auth/me 200 in 384ms
 GET /dashboard 200 in 294ms
 GET /api/customers 200 in 112ms
 GET /api/vendors 200 in 236ms
 GET /api/auth/me 200 in 253ms
 GET /dashboard 200 in 263ms
 GET /api/customers 200 in 281ms
 GET /api/vendors 200 in 355ms
 GET /api/auth/me 200 in 300ms
 GET /dashboard 200 in 352ms
 GET /api/customers 200 in 160ms
 GET /api/vendors 200 in 281ms
 GET /api/auth/me 200 in 288ms
 ✓ Compiled in 923ms (2771 modules)
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 GET /dashboard 200 in 845ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 799ms (1520 modules)
 ✓ Compiled (1600 modules)
 GET /api/vendors 200 in 1245ms
 GET /api/auth/me 200 in 1214ms
 GET /api/customers 200 in 1334ms
 GET /dashboard 200 in 673ms
 GET /api/customers 200 in 121ms
 GET /api/vendors 200 in 238ms
 GET /api/auth/me 200 in 288ms
 GET /dashboard 200 in 333ms
 GET /api/customers 200 in 150ms
 GET /api/vendors 200 in 342ms
 GET /api/auth/me 200 in 310ms
 GET /dashboard 200 in 304ms
 GET /api/customers 200 in 148ms
 GET /api/vendors 200 in 516ms
 GET /api/auth/me 200 in 534ms
 GET /dashboard 200 in 260ms
 GET /api/customers 200 in 154ms
 GET /api/vendors 200 in 339ms
 GET /api/auth/me 200 in 305ms
 ✓ Compiled in 1798ms (2869 modules)
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 GET /dashboard 200 in 751ms
 GET /api/customers 200 in 141ms
 GET /api/vendors 200 in 238ms
 GET /api/auth/me 200 in 272ms
 ✓ Compiled in 984ms (2869 modules)
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 ⨯ ReferenceError: lowStock is not defined
    at DashboardPage (app/dashboard/page.tsx:410:14)
  408 |           <CardContent className="space-y-4">
  409 |             {/* Low Stock Alerts */}
> 410 |             {lowStock.length > 0 && (
      |              ^
  411 |               <Alert>
  412 |                 <AlertTriangle className="h-4 w-4" />
  413 |                 <AlertDescription> {
  digest: '158844135'
}
 GET /dashboard 500 in 818ms
 ✓ Compiled in 641ms (2869 modules)
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 GET /dashboard 200 in 704ms
 GET /api/customers 200 in 129ms
 GET /api/vendors 200 in 197ms
 GET /api/auth/me 200 in 227ms
 GET /dashboard 200 in 306ms
 GET /api/customers 200 in 163ms
 GET /api/vendors 200 in 273ms
 GET /api/auth/me 200 in 251ms
 ○ Compiling /products ...
 ✓ Compiled /products in 1945ms (2792 modules)
 GET /products 200 in 2360ms
 ○ Compiling /products/subcategories ...
 ✓ Compiled /products/subcategories in 754ms (2822 modules)
 GET /products/subcategories 200 in 964ms
 ○ Compiling /products/units ...
 ✓ Compiled /products/units in 578ms (2833 modules)
 GET /products/units 200 in 750ms
 ○ Compiling /products/batches ...
 ✓ Compiled /products/batches in 553ms (2842 modules)
 GET /products/batches 200 in 720ms
 ✓ Compiled in 2.6s (2824 modules)
 ⚠ Fast Refresh had to perform a full reload due to a runtime error.
 GET /products/batches 200 in 933ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 3.1s (1620 modules)
 GET /api/auth/me 200 in 3491ms
 ○ Compiling /products/barcode ...
 ✓ Compiled /products/barcode in 1815ms (2937 modules)
 GET /products/barcode 200 in 2204ms
 GET /products/batches 200 in 154ms
 ○ Compiling /settings/global ...
 ✓ Compiled /settings/global in 1747ms (2962 modules)
 GET /settings/global 200 in 2950ms
 ○ Compiling /settings/payments ...
 ✓ Compiled /settings/payments in 2.1s (2882 modules)
 GET /settings/payments 200 in 2455ms
 GET /settings/payments 200 in 533ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 734ms (1009 modules)
 GET /api/auth/me 200 in 1005ms
 GET /products 200 in 183ms
 ○ Compiling /products/add ...
 ✓ Compiled /products/add in 1313ms (2250 modules)
 GET /products/add 200 in 1727ms
 GET /products/add 200 in 580ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 792ms (1011 modules)
 GET /api/auth/me 200 in 1036ms
 GET /products/add 200 in 751ms
 GET /api/auth/me 200 in 162ms
 ○ Compiling /inventory/stock ...
 ✓ Compiled /inventory/stock in 2.9s (2350 modules)
 GET /inventory/stock 200 in 3231ms
 ○ Compiling /purchases/orders ...
 ✓ Compiled /purchases/orders in 1801ms (2258 modules)
 GET /purchases/orders 200 in 2114ms
 ○ Compiling /purchases/orders/create ...
 ✓ Compiled /purchases/orders/create in 535ms (2254 modules)
 GET /purchases/orders/create 200 in 738ms
 ○ Compiling /purchases/returns ...
 ✓ Compiled /purchases/returns in 731ms (2255 modules)
 GET /purchases/returns 200 in 907ms
 ○ Compiling /purchases/grn ...
 ✓ Compiled /purchases/grn in 547ms (2262 modules)
 GET /purchases/grn 200 in 785ms
 ○ Compiling /_not-found ...
 ✓ Compiled /_not-found in 1204ms (2265 modules)
 GET /api/purchases/grn 404 in 1633ms
 GET /api/purchases/grn 404 in 171ms
 GET /purchases/orders 200 in 115ms
 GET /purchases/grn 200 in 115ms
 GET /api/purchases/grn 404 in 151ms
 GET /api/purchases/grn 404 in 109ms
 ○ Compiling /purchases/bills ...
 ✓ Compiled /purchases/bills in 1717ms (2275 modules)
 GET /purchases/bills 200 in 1913ms
 GET /purchases/grn 200 in 121ms
 GET /purchases/orders 200 in 127ms
 GET /purchases/grn 200 in 132ms
 GET /api/purchases/grn 404 in 362ms
 GET /api/purchases/grn 404 in 148ms
 GET /purchases/orders 200 in 123ms
 GET /purchases/grn 200 in 127ms
 GET /api/purchases/grn 404 in 161ms
 GET /api/purchases/grn 404 in 146ms
 GET /purchases/orders 200 in 115ms
 ○ Compiling /dashboard ...
 ✓ Compiled /dashboard in 2.5s (1540 modules)
 GET /dashboard 200 in 2735ms
 ○ Compiling /api/vendors ...
 ✓ Compiled /api/vendors in 993ms (1558 modules)
 ✓ Compiled (1560 modules)
 GET /api/vendors 200 in 1521ms
 GET /api/customers 200 in 1613ms
 ○ Compiling /products/add ...
 ✓ Compiled /products/add in 636ms (1567 modules)
 GET /products/add 200 in 950ms
 ✓ Compiled in 4.3s (2886 modules)
 ○ Compiling /products ...
 ✓ Compiled /products in 1279ms (1547 modules)
 GET /products 200 in 1585ms
 GET /products 200 in 512ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 1790ms (1636 modules)
 GET /api/auth/me 200 in 2064ms
 GET /products/add 200 in 203ms
 GET /products 200 in 126ms
 GET /products 200 in 541ms
 GET /api/auth/me 200 in 126ms
 ○ Compiling /products/subcategories ...
 ✓ Compiled /products/subcategories in 2.1s (1555 modules)
 GET /products/subcategories 200 in 2463ms
 ○ Compiling /products/brands ...
 ✓ Compiled /products/brands in 3s (2902 modules)
 GET /products/brands 200 in 3278ms
 GET /products/brands 200 in 580ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 520ms (1643 modules)
 GET /api/auth/me 200 in 764ms
 GET /products/brands 200 in 621ms
 GET /api/auth/me 200 in 135ms
 GET /products 200 in 191ms
 GET /products 200 in 346ms
 ✓ Compiled in 2.9s (3056 modules)
 GET /products 200 in 699ms
 GET /products 200 in 327ms
 ✓ Compiled in 1866ms (3056 modules)
 GET /products 200 in 219ms
 GET /products 200 in 316ms
 ✓ Compiled in 1029ms (3056 modules)
 GET /products 200 in 183ms
 GET /products 200 in 306ms
 ✓ Compiled in 891ms (3056 modules)
 GET /products 200 in 210ms
 GET /products 200 in 376ms
 ✓ Compiled in 1978ms (3056 modules)
 GET /products 200 in 271ms
 GET /products 200 in 332ms
 ✓ Compiled in 880ms (3056 modules)
 GET /products 200 in 203ms
 ○ Compiling /purchases/upload ...
 ✓ Compiled /purchases/upload in 4.1s (2909 modules)
 GET /purchases/upload 200 in 5305ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 1466ms (1651 modules)
 GET /api/auth/me 200 in 2133ms
 ○ Compiling /inventory/stock ...
 ✓ Compiled /inventory/stock in 996ms (1013 modules)
 GET /inventory/stock 200 in 1680ms
 GET /api/auth/me 200 in 173ms
 GET /purchases/upload 200 in 141ms
 ○ Compiling /admin/approvals ...
 ✓ Compiled /admin/approvals in 5.1s (2275 modules)
 GET /admin/approvals 200 in 5939ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 1327ms (2375 modules)
 GET /api/auth/me 200 in 1761ms
Database query error: Error: getaddrinfo EAI_AGAIN postgres
    at async query (lib/database.ts:76:20)
    at async GET (app/api/uploads/purchase/route.ts:314:20)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  errno: -3001,
  code: 'EAI_AGAIN',
  syscall: 'getaddrinfo',
  hostname: 'postgres'
}
Query: 
      SELECT * FROM upload_sessions
      WHERE upload_type = $1
     AND approval_status = $2 ORDER BY created_at DESC
Params: [ 'purchase', 'pending' ]
Fetch error: Error: getaddrinfo EAI_AGAIN postgres
    at async query (lib/database.ts:76:20)
    at async GET (app/api/uploads/purchase/route.ts:314:20)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  errno: -3001,
  code: 'EAI_AGAIN',
  syscall: 'getaddrinfo',
  hostname: 'postgres'
}
 GET /api/uploads/purchase?status=pending 500 in 2125ms
 ○ Compiling /api/uploads/inventory ...
 ✓ Compiled /api/uploads/inventory in 668ms (2377 modules)
Database query error: Error: Connection terminated due to connection timeout
    at async query (lib/database.ts:76:20)
    at async GET (app/api/uploads/inventory/route.ts:234:20)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  [cause]: [Error: Connection terminated unexpectedly]
}
Query: 
      SELECT * FROM upload_sessions
      WHERE upload_type = 'inventory'
     AND approval_status = $1 ORDER BY created_at DESC
Params: [ 'pending' ]
Fetch error: Error: Connection terminated due to connection timeout
    at async query (lib/database.ts:76:20)
    at async GET (app/api/uploads/inventory/route.ts:234:20)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  [cause]: [Error: Connection terminated unexpectedly]
}
 GET /api/uploads/inventory?status=pending 500 in 3064ms
 ○ Compiling /inventory/upload ...
 ✓ Compiled /inventory/upload in 1715ms (2375 modules)
 GET /inventory/upload 200 in 2349ms
 GET /api/auth/me 200 in 183ms
 GET /purchases/upload 200 in 292ms
 GET /api/auth/me 200 in 131ms
 ✓ Compiled in 5.9s (2252 modules)
 ✓ Compiled in 1811ms (2254 modules)
 GET /purchases/upload 200 in 681ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 1007ms (988 modules)
 GET /api/auth/me 200 in 1307ms
 ○ Compiling /api/uploads/purchase ...
 ✓ Compiled /api/uploads/purchase in 794ms (994 modules)
Detected Marg ERP format: 1 invoice(s), 42 items
Database query error: Error: getaddrinfo EAI_AGAIN postgres
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:114:29)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  errno: -3001,
  code: 'EAI_AGAIN',
  syscall: 'getaddrinfo',
  hostname: 'postgres'
}
Query: INSERT INTO upload_sessions (
          upload_type, file_name, file_size, total_rows, status, uploaded_by,
          supplier_name, invoice_number, invoice_date, total_amount, total_items
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11)
        RETURNING *
Params: [
  'purchase',
  'KHANDELWAL_HOMOEO_STORE_20251008_S_GC10943.csv',
  10126,
  42,
  'processing',
  '0',
  'YEELO HOMOEOPATHY GURGAON',
  'GC10943',
  '2025-10-08',
  51477.28000000001,
  42
]
Upload error: Error: getaddrinfo EAI_AGAIN postgres
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:114:29)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  errno: -3001,
  code: 'EAI_AGAIN',
  syscall: 'getaddrinfo',
  hostname: 'postgres'
}
 POST /api/uploads/purchase 500 in 1208ms
   Reload env: .env.local
 ✓ Compiled in 2.5s (2413 modules)
 GET /inventory/upload 200 in 724ms
 GET /admin/approvals 200 in 732ms
 GET /products 200 in 732ms
 GET /purchases/upload 200 in 734ms
 GET /purchases/upload 200 in 170ms
 GET /purchases/upload 200 in 521ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 540ms (988 modules)
 GET /api/auth/me 200 in 877ms
 ✓ Compiled /api/uploads/purchase in 254ms (994 modules)
Detected Marg ERP format: 1 invoice(s), 42 items
Database query error: error: invalid input syntax for type uuid: "0"
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:114:29)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  length: 133,
  severity: 'ERROR',
  code: '22P02',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: "unnamed portal parameter $6 = '...'",
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'uuid.c',
  line: '133',
  routine: 'string_to_uuid'
}
Query: INSERT INTO upload_sessions (
          upload_type, file_name, file_size, total_rows, status, uploaded_by,
          supplier_name, invoice_number, invoice_date, total_amount, total_items
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11)
        RETURNING *
Params: [
  'purchase',
  'KHANDELWAL_HOMOEO_STORE_20251008_S_GC10943.csv',
  10126,
  42,
  'processing',
  '0',
  'YEELO HOMOEOPATHY GURGAON',
  'GC10943',
  '2025-10-08',
  51477.28000000001,
  42
]
Upload error: error: invalid input syntax for type uuid: "0"
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:114:29)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  length: 133,
  severity: 'ERROR',
  code: '22P02',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: "unnamed portal parameter $6 = '...'",
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'uuid.c',
  line: '133',
  routine: 'string_to_uuid'
}
 POST /api/uploads/purchase 500 in 611ms
 ✓ Compiled in 1553ms (894 modules)
 GET /purchases/upload 200 in 716ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 1362ms (988 modules)
 GET /api/auth/me 200 in 1720ms
 ○ Compiling /api/uploads/purchase ...
 ✓ Compiled /api/uploads/purchase in 1828ms (994 modules)
Detected Marg ERP format: 1 invoice(s), 42 items
Slow query detected (139ms): INSERT INTO upload_sessions (
          upload_type, file_name, file_size, total_rows, status, uploaded_by,
          supplier_name, invoice_number, invoice_date, total_amount, total_items
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11)
        RETURNING *
Slow query detected (106ms): SELECT id FROM products WHERE sku = $1 LIMIT 1
Slow query detected (121ms): SELECT id FROM products WHERE sku = $1 LIMIT 1
Slow query detected (153ms): SELECT id, name FROM products WHERE name ILIKE $1 LIMIT 1
 GET /inventory/upload 200 in 714ms
 GET /purchases/upload 200 in 771ms
 GET /admin/approvals 200 in 773ms
 GET /products 200 in 774ms
Slow query detected (135ms): SELECT id FROM products WHERE sku = $1 LIMIT 1
Slow query detected (114ms): SELECT id, name FROM products WHERE name ILIKE $1 LIMIT 1
 GET /purchases/upload 200 in 486ms
Database query error: error: invalid input syntax for type date: ""
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:240:9)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  length: 139,
  severity: 'ERROR',
  code: '22007',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: "unnamed portal parameter $12 = ''",
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'datetime.c',
  line: '4048',
  routine: 'DateTimeParseError'
}
Query: INSERT INTO upload_items (
            session_id, row_number, status, product_code, product_name,
            brand, potency, size, form, hsn_code, batch_number, expiry_date,
            quantity, unit_price, mrp, discount_percent, discount_amount,
            tax_percent, tax_amount, total_amount, matched_product_id,
            match_type, match_confidence, validation_errors, raw_data
          ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25)
Params: [
  'ed9b52f4-ec37-45ed-8ebb-2b2699b7e4ed',
  1,
  'pending',
  '0001973',
  'SBL DILUTION 200',
  'SBL DILUTION',
  '200',
  '30ML',
  'DILUTION',
  'SBL DILUTION 200',
  'N5',
  '',
  71,
  64,
  130,
  0,
  0,
  4.76,
  216.2944,
  4760.2944,
  null,
  null,
  0,
  '{"product":"Product not found in database"}',
  '{"Invoice Number":"GC10943","Invoice Date":"2025-10-08","Supplier Name":"YEELO HOMOEOPATHY GURGAON","Supplier GSTIN":"06BUAPG3815Q1ZH","Product Code":"0001973","Product Name":"SBL DILUTION 200","Brand":"SBL DILUTION","Potency":"200","Size":"30ML","Form":"DILUTION","HSN Code":"SBL DILUTION 200","Batch Number":"N5","Expiry Date":"","Quantity":"71","Unit Price":"64","MRP":"130","Discount %":"0","Tax %":"4.76","Total Amount":"6065.37"}'
]
Upload error: error: invalid input syntax for type date: ""
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:240:9)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  length: 139,
  severity: 'ERROR',
  code: '22007',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: "unnamed portal parameter $12 = ''",
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'datetime.c',
  line: '4048',
  routine: 'DateTimeParseError'
}
 POST /api/uploads/purchase 500 in 3832ms
 GET /purchases/upload 200 in 487ms
 GET /api/auth/me 200 in 192ms
 ✓ Compiled in 391ms (994 modules)
 GET /purchases/upload 200 in 757ms
 GET /inventory/upload 200 in 897ms
 GET /admin/approvals 200 in 899ms
 GET /products 200 in 918ms
 GET /purchases/upload 200 in 432ms
 ✓ Compiled in 375ms (994 modules)
 GET /products 200 in 839ms
 GET /admin/approvals 200 in 879ms
 GET /inventory/upload 200 in 889ms
 GET /purchases/upload 200 in 1025ms
Detected Marg ERP format: 1 invoice(s), 42 items
 GET /purchases/upload 200 in 609ms
Slow query detected (222ms): INSERT INTO upload_sessions (
          upload_type, file_name, file_size, total_rows, status, uploaded_by,
          supplier_name, invoice_number, invoice_date, total_amount, total_items
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11)
        RETURNING *
Database query error: error: invalid input syntax for type date: ""
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:240:9)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  length: 139,
  severity: 'ERROR',
  code: '22007',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: "unnamed portal parameter $12 = ''",
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'datetime.c',
  line: '4048',
  routine: 'DateTimeParseError'
}
Query: INSERT INTO upload_items (
            session_id, row_number, status, product_code, product_name,
            brand, potency, size, form, hsn_code, batch_number, expiry_date,
            quantity, unit_price, mrp, discount_percent, discount_amount,
            tax_percent, tax_amount, total_amount, matched_product_id,
            match_type, match_confidence, validation_errors, raw_data
          ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25)
Params: [
  'c7e16616-4b3e-4a8f-b353-cb5238c2d926',
  1,
  'pending',
  '0001973',
  'SBL DILUTION 200',
  'SBL DILUTION',
  '200',
  '30ML',
  'DILUTION',
  'SBL DILUTION 200',
  'N5',
  '',
  71,
  64,
  130,
  0,
  0,
  4.76,
  216.2944,
  4760.2944,
  null,
  null,
  0,
  '{"product":"Product not found in database"}',
  '{"Invoice Number":"GC10943","Invoice Date":"2025-10-08","Supplier Name":"YEELO HOMOEOPATHY GURGAON","Supplier GSTIN":"06BUAPG3815Q1ZH","Product Code":"0001973","Product Name":"SBL DILUTION 200","Brand":"SBL DILUTION","Potency":"200","Size":"30ML","Form":"DILUTION","HSN Code":"SBL DILUTION 200","Batch Number":"N5","Expiry Date":"","Quantity":"71","Unit Price":"64","MRP":"130","Discount %":"0","Tax %":"4.76","Total Amount":"6065.37"}'
]
Upload error: error: invalid input syntax for type date: ""
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:240:9)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  length: 139,
  severity: 'ERROR',
  code: '22007',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: "unnamed portal parameter $12 = ''",
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'datetime.c',
  line: '4048',
  routine: 'DateTimeParseError'
}
 POST /api/uploads/purchase 500 in 1173ms
 GET /purchases/upload 200 in 473ms
 GET /api/auth/me 200 in 135ms
 ✓ Compiled in 388ms (994 modules)
 GET /inventory/upload 200 in 1168ms
 GET /products 200 in 1179ms
 GET /admin/approvals 200 in 1186ms
 GET /purchases/upload 200 in 1189ms
 GET /purchases/upload 200 in 455ms
Detected Marg ERP format: 1 invoice(s), 42 items
Database query error: error: invalid input syntax for type date: ""
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:240:9)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  length: 139,
  severity: 'ERROR',
  code: '22007',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: "unnamed portal parameter $12 = ''",
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'datetime.c',
  line: '4048',
  routine: 'DateTimeParseError'
}
Query: INSERT INTO upload_items (
            session_id, row_number, status, product_code, product_name,
            brand, potency, size, form, hsn_code, batch_number, expiry_date,
            quantity, unit_price, mrp, discount_percent, discount_amount,
            tax_percent, tax_amount, total_amount, matched_product_id,
            match_type, match_confidence, validation_errors, raw_data
          ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25)
Params: [
  'd7802e4c-b94f-411f-8780-563e68c47005',
  1,
  'pending',
  '0001973',
  'SBL DILUTION 200',
  'SBL DILUTION',
  '200',
  '30ML',
  'DILUTION',
  'SBL DILUTION 200',
  'N5',
  '',
  71,
  64,
  130,
  0,
  0,
  4.76,
  216.2944,
  4760.2944,
  null,
  null,
  0,
  '{"product":"Product not found in database"}',
  '{"Invoice Number":"GC10943","Invoice Date":"2025-10-08","Supplier Name":"YEELO HOMOEOPATHY GURGAON","Supplier GSTIN":"06BUAPG3815Q1ZH","Product Code":"0001973","Product Name":"SBL DILUTION 200","Brand":"SBL DILUTION","Potency":"200","Size":"30ML","Form":"DILUTION","HSN Code":"SBL DILUTION 200","Batch Number":"N5","Expiry Date":"","Quantity":"71","Unit Price":"64","MRP":"130","Discount %":"0","Tax %":"4.76","Total Amount":"6065.37"}'
]
Upload error: error: invalid input syntax for type date: ""
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:240:9)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  length: 139,
  severity: 'ERROR',
  code: '22007',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: "unnamed portal parameter $12 = ''",
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'datetime.c',
  line: '4048',
  routine: 'DateTimeParseError'
}
 POST /api/uploads/purchase 500 in 518ms
 GET /purchases/upload 200 in 403ms
 ✓ Compiled in 540ms (994 modules)
 GET /admin/approvals 200 in 581ms
 GET /purchases/upload 200 in 596ms
 GET /inventory/upload 200 in 606ms
 GET /products 200 in 609ms
 GET /api/auth/me 200 in 275ms
Detected Marg ERP format: 1 invoice(s), 42 items
Database query error: error: invalid input syntax for type date: ""
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:245:9)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  length: 139,
  severity: 'ERROR',
  code: '22007',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: "unnamed portal parameter $12 = ''",
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'datetime.c',
  line: '4048',
  routine: 'DateTimeParseError'
}
Query: INSERT INTO upload_items (
            session_id, row_number, status, product_code, product_name,
            brand, potency, size, form, hsn_code, batch_number, expiry_date,
            quantity, unit_price, mrp, discount_percent, discount_amount,
            tax_percent, tax_amount, total_amount, matched_product_id,
            match_type, match_confidence, validation_errors, raw_data
          ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25)
Params: [
  'a2b040c7-6e29-4557-a2ad-a2a8fe6b41f8',
  1,
  'pending',
  '0001973',
  'SBL DILUTION 200',
  'SBL DILUTION',
  '200',
  '30ML',
  'DILUTION',
  'SBL DILUTION 200',
  'N5',
  '',
  71,
  64,
  130,
  0,
  0,
  4.76,
  216.2944,
  4760.2944,
  null,
  null,
  0,
  '{"product":"Product not found in database"}',
  '{"Invoice Number":"GC10943","Invoice Date":"2025-10-08","Supplier Name":"YEELO HOMOEOPATHY GURGAON","Supplier GSTIN":"06BUAPG3815Q1ZH","Product Code":"0001973","Product Name":"SBL DILUTION 200","Brand":"SBL DILUTION","Potency":"200","Size":"30ML","Form":"DILUTION","HSN Code":"SBL DILUTION 200","Batch Number":"N5","Expiry Date":"","Quantity":"71","Unit Price":"64","MRP":"130","Discount %":"0","Tax %":"4.76","Total Amount":"6065.37"}'
]
Upload error: error: invalid input syntax for type date: ""
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:245:9)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  length: 139,
  severity: 'ERROR',
  code: '22007',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: "unnamed portal parameter $12 = ''",
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'datetime.c',
  line: '4048',
  routine: 'DateTimeParseError'
}
 POST /api/uploads/purchase 500 in 504ms
 GET /purchases/upload 200 in 368ms
 ✓ Compiled in 437ms (994 modules)
 GET /admin/approvals 200 in 1016ms
 GET /inventory/upload 200 in 1054ms
 GET /purchases/upload 200 in 1056ms
 GET /products 200 in 1058ms
 GET /api/auth/me 200 in 214ms
Detected Marg ERP format: 1 invoice(s), 42 items
Database query error: error: invalid input syntax for type date: ""
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:245:9)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  length: 139,
  severity: 'ERROR',
  code: '22007',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: "unnamed portal parameter $12 = ''",
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'datetime.c',
  line: '4048',
  routine: 'DateTimeParseError'
}
Query: INSERT INTO upload_items (
            session_id, row_number, status, product_code, product_name,
            brand, potency, size, form, hsn_code, batch_number, expiry_date,
            quantity, unit_price, mrp, discount_percent, discount_amount,
            tax_percent, tax_amount, total_amount, matched_product_id,
            match_type, match_confidence, validation_errors, raw_data
          ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16, $17, $18, $19, $20, $21, $22, $23, $24, $25)
Params: [
  'c866e734-e37d-4e41-b1c1-6246de4cc852',
  1,
  'pending',
  '0001973',
  'SBL DILUTION 200',
  'SBL DILUTION',
  '200',
  '30ML',
  'DILUTION',
  'SBL DILUTION 200',
  'N5',
  '',
  71,
  64,
  130,
  0,
  0,
  4.76,
  216.2944,
  4760.2944,
  null,
  null,
  0,
  '{"product":"Product not found in database"}',
  '{"Invoice Number":"GC10943","Invoice Date":"2025-10-08","Supplier Name":"YEELO HOMOEOPATHY GURGAON","Supplier GSTIN":"06BUAPG3815Q1ZH","Product Code":"0001973","Product Name":"SBL DILUTION 200","Brand":"SBL DILUTION","Potency":"200","Size":"30ML","Form":"DILUTION","HSN Code":"SBL DILUTION 200","Batch Number":"N5","Expiry Date":"","Quantity":"71","Unit Price":"64","MRP":"130","Discount %":"0","Tax %":"4.76","Total Amount":"6065.37"}'
]
Upload error: error: invalid input syntax for type date: ""
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:245:9)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  length: 139,
  severity: 'ERROR',
  code: '22007',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: "unnamed portal parameter $12 = ''",
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'datetime.c',
  line: '4048',
  routine: 'DateTimeParseError'
}
 POST /api/uploads/purchase 500 in 463ms
 GET /purchases/upload 200 in 407ms
 ✓ Compiled in 779ms (994 modules)
 ✓ Compiled in 0ms (994 modules)
 ✓ Compiled in 0ms (994 modules)
 ✓ Compiled in 1ms (994 modules)
 GET /api/auth/me 200 in 1879ms
 GET /products 200 in 2256ms
 GET /inventory/upload 200 in 2266ms
 GET /purchases/upload 200 in 2267ms
 GET /admin/approvals 200 in 2270ms
 GET /purchases/upload 200 in 412ms
Detected Marg ERP format: 1 invoice(s), 42 items
 POST /api/uploads/purchase 200 in 439ms
 GET /admin/approvals 200 in 405ms
 GET /api/uploads/purchase?status=pending 200 in 294ms
 GET /api/auth/me 200 in 232ms
 ○ Compiling /api/uploads/inventory ...
 ✓ Compiled /api/uploads/inventory in 1680ms (996 modules)
 GET /api/uploads/inventory?status=pending 200 in 1955ms
 GET /inventory/upload 200 in 625ms
 GET /purchases/upload 200 in 642ms
 GET /products 200 in 644ms
 GET /admin/approvals 200 in 648ms
 GET /purchases/upload 200 in 301ms
 ✓ Compiled in 431ms (996 modules)
 GET /purchases/upload 200 in 554ms
 GET /products 200 in 649ms
 GET /admin/approvals 200 in 659ms
 GET /inventory/upload 200 in 661ms
 GET /purchases/upload 200 in 276ms
 ○ Compiling /api/uploads/approve ...
 ✓ Compiled /api/uploads/approve in 1527ms (2351 modules)
 POST /api/uploads/approve 200 in 1862ms
 ○ Compiling /api/uploads/purchase ...
 ✓ Compiled /api/uploads/purchase in 1105ms (994 modules)
 GET /api/uploads/purchase?status=pending 200 in 1340ms
 ✓ Compiled /api/uploads/inventory in 376ms (996 modules)
 GET /api/uploads/inventory?status=pending 200 in 592ms
 GET /inventory/upload 200 in 542ms
 ✓ Compiled /api/auth/me in 501ms (998 modules)
 GET /api/auth/me 200 in 696ms
 ○ Compiling /purchases/orders ...
 ✓ Compiled /purchases/orders in 3.6s (1004 modules)
 GET /purchases/orders 200 in 3827ms
 ○ Compiling /inventory/stock ...
 ✓ Compiled /inventory/stock in 3s (1025 modules)
 GET /inventory/stock 200 in 3205ms
 ○ Compiling /inventory/adjustments ...
 ✓ Compiled /inventory/adjustments in 2.8s (2386 modules)
 GET /inventory/adjustments 200 in 3262ms
 ○ Compiling /purchases/bills ...
 ✓ Compiled /purchases/bills in 2.3s (1027 modules)
 GET /purchases/bills 200 in 2509ms
 ✓ Compiled in 2.3s (845 modules)
 GET /purchases/upload 200 in 785ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 1466ms (939 modules)
 GET /api/auth/me 200 in 1829ms
 ○ Compiling /api/uploads/purchase ...
 ✓ Compiled /api/uploads/purchase in 2.1s (945 modules)
Detected Marg ERP format: 1 invoice(s), 42 items
Slow query detected (116ms): INSERT INTO upload_sessions (
          upload_type, file_name, file_size, total_rows, status, uploaded_by,
          supplier_name, invoice_number, invoice_date, total_amount, total_items
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11)
        RETURNING *
Database query error: error: column "price" does not exist
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:201:29)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  length: 105,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '12',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3665',
  routine: 'errorMissingColumn'
}
Query: SELECT id, price, mrp FROM products WHERE sku = $1 LIMIT 1
Params: [ '0001973' ]
Upload error: error: column "price" does not exist
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:201:29)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  length: 105,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '12',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3665',
  routine: 'errorMissingColumn'
}
 POST /api/uploads/purchase 500 in 2850ms
 GET /purchases/bills 200 in 1164ms
 GET /products 200 in 1167ms
 GET /admin/approvals 200 in 1169ms
 GET /purchases/upload 200 in 1169ms
 GET /inventory/upload 200 in 1172ms
Detected Marg ERP format: 1 invoice(s), 42 items
Database query error: error: column "price" does not exist
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:201:29)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  length: 105,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '12',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3665',
  routine: 'errorMissingColumn'
}
Query: SELECT id, price, mrp FROM products WHERE sku = $1 LIMIT 1
Params: [ '0001973' ]
Upload error: error: column "price" does not exist
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:201:29)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  length: 105,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '12',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3665',
  routine: 'errorMissingColumn'
}
 POST /api/uploads/purchase 500 in 354ms
 GET /admin/approvals 200 in 591ms
 GET /api/auth/me 200 in 377ms
 GET /api/uploads/purchase?status=pending 200 in 483ms
 ○ Compiling /api/uploads/inventory ...
 ✓ Compiled /api/uploads/inventory in 2.6s (947 modules)
 GET /api/uploads/inventory?status=pending 200 in 3183ms
 ○ Compiling /api/uploads/approve ...
 ✓ Compiled /api/uploads/approve in 2.5s (949 modules)
 POST /api/uploads/approve 200 in 3195ms
 GET /purchases/bills 200 in 773ms
 GET /purchases/upload 200 in 775ms
 GET /products 200 in 777ms
 GET /admin/approvals 200 in 778ms
 GET /inventory/upload 200 in 778ms
 GET /api/uploads/purchase?status=pending 200 in 256ms
 GET /api/uploads/inventory?status=pending 200 in 195ms
 GET /inventory/upload 200 in 771ms
 GET /purchases/upload 200 in 1945ms
 GET /purchases/bills 200 in 1946ms
 GET /admin/approvals 200 in 1951ms
 GET /products 200 in 1954ms
 ✓ Compiled in 3.3s (2473 modules)
 GET /inventory/upload 200 in 882ms
 GET /purchases/upload 200 in 792ms
 GET /products 200 in 796ms
 GET /purchases/bills 200 in 797ms
 GET /admin/approvals 200 in 801ms
 GET /admin/approvals 200 in 1009ms
 GET /products 200 in 1028ms
 GET /purchases/upload 200 in 1030ms
 GET /purchases/bills 200 in 1034ms
 GET /inventory/upload 200 in 1038ms
 ✓ Compiled in 2.2s (2473 modules)
 GET /inventory/upload 200 in 928ms
 GET /admin/approvals 200 in 949ms
 GET /purchases/bills 200 in 955ms
 GET /purchases/upload 200 in 956ms
 GET /products 200 in 974ms
 ✓ Compiled in 6.5s (2310 modules)
 ✓ Compiled in 3.1s (2210 modules)
 ✓ Compiled in 734ms (2210 modules)
 ○ Compiling /api/uploads/purchase ...
 ✓ Compiled /api/uploads/purchase in 1572ms (943 modules)
 GET /api/uploads/purchase?status=pending 200 in 1997ms
 ✓ Compiled /api/uploads/inventory in 376ms (945 modules)
 GET /api/uploads/inventory?status=pending 200 in 613ms
 GET /admin/approvals 200 in 643ms
 GET /api/uploads/purchase?status=pending 200 in 429ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 5.2s (947 modules)
 GET /api/auth/me 200 in 6190ms
 GET /api/uploads/inventory?status=pending 200 in 3812ms
 GET /purchases/bills 200 in 2979ms
 GET /purchases/upload 200 in 517ms
 GET /api/auth/me 200 in 187ms
 GET /api/auth/me 200 in 279ms
Detected Marg ERP format: 1 invoice(s), 42 items
Database query error: error: column "price" does not exist
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:201:29)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  length: 105,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '12',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3665',
  routine: 'errorMissingColumn'
}
Query: SELECT id, price, mrp FROM products WHERE sku = $1 LIMIT 1
Params: [ '0001973' ]
Upload error: error: column "price" does not exist
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:201:29)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  length: 105,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '12',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3665',
  routine: 'errorMissingColumn'
}
 POST /api/uploads/purchase 500 in 370ms
 GET /purchases/upload 200 in 344ms
 GET /purchases/upload 200 in 255ms
 GET /api/auth/me 200 in 147ms
Detected Marg ERP format: 1 invoice(s), 42 items
Database query error: error: column "price" does not exist
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:201:29)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  length: 105,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '12',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3665',
  routine: 'errorMissingColumn'
}
Query: SELECT id, price, mrp FROM products WHERE sku = $1 LIMIT 1
Params: [ '0001973' ]
Upload error: error: column "price" does not exist
    at async query (lib/database.ts:76:20)
    at async POST (app/api/uploads/purchase/route.ts:201:29)
  74 |
  75 |   try {
> 76 |     const result = await db.query<T>(text, params)
     |                    ^
  77 |     const duration = Date.now() - start
  78 |
  79 |     // Log slow queries (> 100ms) {
  length: 105,
  severity: 'ERROR',
  code: '42703',
  detail: undefined,
  hint: undefined,
  position: '12',
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'parse_relation.c',
  line: '3665',
  routine: 'errorMissingColumn'
}
 POST /api/uploads/purchase 500 in 330ms
 GET /purchases/bills 200 in 233ms
 GET /admin/approvals 200 in 330ms
 GET /api/auth/me 200 in 276ms
 GET /api/uploads/purchase?status=pending 200 in 363ms
 GET /api/uploads/inventory?status=pending 200 in 139ms
 ✓ Compiled in 2.3s (947 modules)
 GET /products 200 in 666ms
 GET /admin/approvals 200 in 776ms
 GET /inventory/upload 200 in 777ms
 GET /purchases/upload 200 in 783ms
 ○ Compiling /admin/approvals/[sessionId] ...
 ✓ Compiled /admin/approvals/[sessionId] in 7.3s (2324 modules)
 GET /admin/approvals/2df79d6b-d5e3-45f5-9999-5b0fde11d7e8 200 in 8731ms
 GET /admin/approvals/2df79d6b-d5e3-45f5-9999-5b0fde11d7e8 200 in 196ms
 ○ Compiling /api/uploads/session/[sessionId] ...
 ✓ Compiled /api/uploads/session/[sessionId] in 752ms (2326 modules)
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/2df79d6b-d5e3-45f5-9999-5b0fde11d7e8 200 in 1820ms
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/2df79d6b-d5e3-45f5-9999-5b0fde11d7e8 200 in 247ms
 GET /admin/approvals 200 in 186ms
 GET /api/uploads/purchase?status=pending 200 in 143ms
 GET /api/uploads/purchase?status=pending 200 in 190ms
 GET /api/uploads/inventory?status=pending 200 in 192ms
 GET /api/uploads/inventory?status=pending 200 in 139ms
 GET /admin/approvals/c866e734-e37d-4e41-b1c1-6246de4cc852 200 in 222ms
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/c866e734-e37d-4e41-b1c1-6246de4cc852 200 in 272ms
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/c866e734-e37d-4e41-b1c1-6246de4cc852 200 in 285ms
 GET /admin/approvals 200 in 130ms
 GET /api/uploads/purchase?status=pending 200 in 125ms
 GET /api/uploads/purchase?status=pending 200 in 227ms
 GET /api/uploads/inventory?status=pending 200 in 170ms
 GET /api/uploads/inventory?status=pending 200 in 148ms
 GET /admin/approvals/c7e16616-4b3e-4a8f-b353-cb5238c2d926 200 in 186ms
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/c7e16616-4b3e-4a8f-b353-cb5238c2d926 200 in 289ms
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/c7e16616-4b3e-4a8f-b353-cb5238c2d926 200 in 248ms
 GET /admin/approvals 200 in 142ms
 GET /api/uploads/purchase?status=pending 200 in 134ms
 GET /api/uploads/purchase?status=pending 200 in 243ms
 GET /api/uploads/inventory?status=pending 200 in 190ms
 GET /api/uploads/inventory?status=pending 200 in 134ms
 GET /admin/approvals/ed9b52f4-ec37-45ed-8ebb-2b2699b7e4ed 200 in 185ms
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/ed9b52f4-ec37-45ed-8ebb-2b2699b7e4ed 200 in 300ms
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/ed9b52f4-ec37-45ed-8ebb-2b2699b7e4ed 200 in 223ms
 GET /admin/approvals 200 in 129ms
 GET /api/uploads/purchase?status=pending 200 in 149ms
 GET /api/uploads/purchase?status=pending 200 in 268ms
 GET /api/uploads/inventory?status=pending 200 in 277ms
 GET /api/uploads/inventory?status=pending 200 in 138ms
 GET /purchases/upload 200 in 420ms
 GET /api/auth/me 200 in 149ms
Detected Marg ERP format: 1 invoice(s), 42 items
 POST /api/uploads/purchase 200 in 377ms
 GET /admin/approvals 200 in 250ms
 GET /api/uploads/purchase?status=pending 200 in 298ms
 GET /api/auth/me 200 in 249ms
 GET /api/uploads/inventory?status=pending 200 in 142ms
 GET /admin/approvals/014d78e5-466e-424a-bc1f-a8509c01f9cb 200 in 185ms
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/014d78e5-466e-424a-bc1f-a8509c01f9cb 200 in 290ms
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/014d78e5-466e-424a-bc1f-a8509c01f9cb 200 in 332ms
 GET /admin/approvals 200 in 270ms
 GET /api/uploads/purchase?status=pending 200 in 1393ms
 GET /api/auth/me 200 in 1397ms
 GET /api/uploads/inventory?status=pending 200 in 157ms
 ✓ Compiled in 3.8s (2320 modules)
 GET /admin/approvals/014d78e5-466e-424a-bc1f-a8509c01f9cb 200 in 360ms
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/014d78e5-466e-424a-bc1f-a8509c01f9cb 200 in 489ms
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/014d78e5-466e-424a-bc1f-a8509c01f9cb 200 in 406ms
 GET /admin/approvals/014d78e5-466e-424a-bc1f-a8509c01f9cb 200 in 886ms
 ✓ Compiled in 1300ms (2320 modules)
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/auth/me 200 in 585ms
 GET /api/uploads/session/014d78e5-466e-424a-bc1f-a8509c01f9cb 200 in 706ms
 GET /admin/approvals/014d78e5-466e-424a-bc1f-a8509c01f9cb 200 in 515ms
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/auth/me 200 in 493ms
 GET /api/uploads/session/014d78e5-466e-424a-bc1f-a8509c01f9cb 200 in 503ms
 ⨯ ./app/admin/approvals/[sessionId]/page.tsx
Error:   [31mx[0m Unexpected token. Did you mean `{'}'}` or `&rbrace;`?
     ,-[[36;1;4m/var/www/homeopathy-business-platform/app/admin/approvals/[sessionId]/page.tsx[0m:470:1]
 [2m467[0m |       </div>
 [2m468[0m |     </div>
 [2m469[0m |   );
 [2m470[0m | }
     : [35;1m^[0m
     `----
  [31mx[0m Unexpected eof
     ,-[[36;1;4m/var/www/homeopathy-business-platform/app/admin/approvals/[sessionId]/page.tsx[0m:470:3]
 [2m468[0m |     </div>
 [2m469[0m |   );
 [2m470[0m | }
     `----

Caused by:
    Syntax Error

Import trace for requested module:
./app/admin/approvals/[sessionId]/page.tsx
 ✓ Compiled in 3.7s (2216 modules)
 ⚠ Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
 GET /admin/approvals/014d78e5-466e-424a-bc1f-a8509c01f9cb 200 in 869ms
 ✓ Compiled /api/auth/me in 415ms (944 modules)
 ✓ Compiled (946 modules)
 GET /api/auth/me 200 in 1180ms
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/014d78e5-466e-424a-bc1f-a8509c01f9cb 200 in 1500ms
 ○ Compiling /api/uploads/purchase ...
 ✓ Compiled /api/uploads/purchase in 3.3s (945 modules)
Detected Marg ERP format: 1 invoice(s), 42 items
 POST /api/uploads/purchase 200 in 3813ms
 GET /admin/approvals 200 in 190ms
 GET /api/uploads/purchase?status=pending 200 in 123ms
 GET /api/uploads/purchase?status=pending 200 in 220ms
 ✓ Compiled /api/uploads/inventory in 390ms (947 modules)
 GET /api/uploads/inventory?status=pending 200 in 691ms
 GET /api/uploads/inventory?status=pending 200 in 101ms
 GET /admin/approvals 200 in 463ms
 GET /api/uploads/purchase?status=pending 200 in 214ms
 ✓ Compiled /api/auth/me in 359ms (949 modules)
 GET /api/auth/me 200 in 858ms
 GET /api/uploads/inventory?status=pending 200 in 711ms
 GET /admin/approvals/9bd5be41-f787-499e-aa73-7a2949f8edbb 200 in 200ms
 ○ Compiling /api/uploads/session/[sessionId] ...
 ✓ Compiled /api/uploads/session/[sessionId] in 1157ms (951 modules)
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/9bd5be41-f787-499e-aa73-7a2949f8edbb 200 in 1455ms
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/9bd5be41-f787-499e-aa73-7a2949f8edbb 200 in 207ms
 GET /products 200 in 197ms
 GET /products 200 in 439ms
 GET /api/auth/me 200 in 119ms
 GET /products 200 in 2603ms
 GET /products 200 in 426ms
 GET /api/auth/me 200 in 105ms
 GET /products 200 in 228ms
 GET /api/auth/me 200 in 120ms
 GET /products 200 in 211ms
 GET /api/auth/me 200 in 107ms
 ○ Compiling /products/add ...
 ✓ Compiled /products/add in 6.6s (1009 modules)
 GET /products/add 200 in 6895ms
 GET /products/add 200 in 132ms
 ○ Compiling /products/subcategories ...
 ✓ Compiled /products/subcategories in 1124ms (1022 modules)
 GET /products/subcategories 200 in 1362ms
 ○ Compiling /products/categories ...
 ✓ Compiled /products/categories in 2.5s (2402 modules)
 GET /products/categories 200 in 2674ms
 ○ Compiling /products/brands ...
 ✓ Compiled /products/brands in 1964ms (1035 modules)
 GET /products/brands 200 in 2197ms
 ○ Compiling /products/potencies ...
 ✓ Compiled /products/potencies in 2.6s (2308 modules)
 GET /products/potencies 200 in 2906ms
 ○ Compiling /products/import-export ...
 ✓ Compiled /products/import-export in 814ms (2324 modules)
 GET /products/import-export 200 in 1043ms
 ○ Compiling /admin/approvals ...
 ✓ Compiled /admin/approvals in 2s (913 modules)
 GET /admin/approvals 200 in 2328ms
 ○ Compiling /api/uploads/purchase ...
 ✓ Compiled /api/uploads/purchase in 3.1s (1011 modules)
 GET /api/uploads/purchase?status=pending 200 in 3464ms
 GET /api/uploads/purchase?status=pending 200 in 212ms
 ✓ Compiled /api/uploads/inventory in 423ms (1013 modules)
 GET /api/uploads/inventory?status=pending 200 in 740ms
 GET /api/uploads/inventory?status=pending 200 in 85ms
 ○ Compiling /admin/approvals/[sessionId] ...
 ✓ Compiled /admin/approvals/[sessionId] in 2.8s (1015 modules)
 GET /admin/approvals/014d78e5-466e-424a-bc1f-a8509c01f9cb 200 in 3132ms
 ○ Compiling /api/uploads/session/[sessionId] ...
 ✓ Compiled /api/uploads/session/[sessionId] in 562ms (1017 modules)
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/014d78e5-466e-424a-bc1f-a8509c01f9cb 200 in 871ms
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/014d78e5-466e-424a-bc1f-a8509c01f9cb 200 in 197ms
 ✓ Compiled in 1903ms (847 modules)
 GET /admin/approvals/014d78e5-466e-424a-bc1f-a8509c01f9cb 200 in 834ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 1406ms (944 modules)
 ✓ Compiled (946 modules)
 GET /api/auth/me 200 in 4621ms
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/014d78e5-466e-424a-bc1f-a8509c01f9cb 200 in 4767ms
 GET /purchases/upload 200 in 494ms
 GET /api/auth/me 200 in 206ms
 GET /purchases/upload 200 in 248ms
 GET /api/auth/me 200 in 237ms
 ○ Compiling /api/uploads/purchase ...
 ✓ Compiled /api/uploads/purchase in 1474ms (947 modules)
Detected Marg ERP format: 1 invoice(s), 42 items
Slow query detected (153ms): SELECT id, name FROM products WHERE name ILIKE $1 LIMIT 1
 GET /inventory/upload 200 in 602ms
 GET /admin/approvals/014d78e5-466e-424a-bc1f-a8509c01f9cb 200 in 564ms
 GET /purchases/upload 200 in 615ms
 POST /api/uploads/purchase 200 in 2748ms
 GET /admin/approvals 200 in 142ms
 GET /api/uploads/purchase?status=pending 200 in 188ms
 GET /api/uploads/purchase?status=pending 200 in 218ms
 ○ Compiling /api/uploads/inventory ...
 ✓ Compiled /api/uploads/inventory in 3.1s (949 modules)
 GET /api/uploads/inventory?status=pending 200 in 4160ms
Slow query detected (414ms): 
      SELECT * FROM upload_sessions
      WHERE upload_type = 'inventory'
     AND approval_status = $1 ORDER BY created_at DESC
 GET /admin/approvals 200 in 2527ms
 GET /api/uploads/purchase?status=pending 200 in 259ms
 GET /api/auth/me 200 in 277ms
 GET /api/uploads/inventory?status=pending 200 in 127ms
 GET /admin/approvals/a172debc-fb30-4026-8f44-7f3e7df79555 200 in 186ms
 ✓ Compiled /api/uploads/session/[sessionId] in 502ms (951 modules)
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/a172debc-fb30-4026-8f44-7f3e7df79555 200 in 862ms
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/a172debc-fb30-4026-8f44-7f3e7df79555 200 in 259ms
 GET /admin/approvals/a172debc-fb30-4026-8f44-7f3e7df79555 200 in 550ms
 GET /api/auth/me 200 in 267ms
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/a172debc-fb30-4026-8f44-7f3e7df79555 200 in 408ms
 GET /purchases/upload 200 in 283ms
 GET /api/auth/me 200 in 140ms
 ✓ Compiled in 4.4s (2323 modules)
 ✓ Compiled in 667ms (2229 modules)
 ✓ Compiled in 409ms (2229 modules)
 GET /purchases/upload 200 in 573ms
 ✓ Compiled /api/auth/me in 422ms (941 modules)
 GET /api/auth/me 200 in 732ms
 GET /admin/approvals 200 in 177ms
 ○ Compiling /api/uploads/purchase ...
 ✓ Compiled /api/uploads/purchase in 4.1s (947 modules)
 GET /api/uploads/purchase?status=pending 200 in 4296ms
 GET /api/uploads/purchase?status=pending 200 in 193ms
 ○ Compiling /api/uploads/inventory ...
 ✓ Compiled /api/uploads/inventory in 2.7s (949 modules)
 GET /api/uploads/inventory?status=pending 200 in 3020ms
 GET /api/uploads/inventory?status=pending 200 in 188ms
 ✓ Compiled in 1949ms (2331 modules)
 GET /inventory/upload 200 in 472ms
 GET /api/auth/me 200 in 170ms
 GET /inventory/upload 200 in 134ms
 ○ Compiling /inventory/stock ...
 ✓ Compiled /inventory/stock in 2.1s (1013 modules)
 GET /inventory/stock 200 in 2330ms
 GET /inventory/upload 200 in 139ms
 GET /admin/approvals/a172debc-fb30-4026-8f44-7f3e7df79555 200 in 623ms
 ○ Compiling /api/auth/me ...
 ✓ Compiled /api/auth/me in 4s (944 modules)
 ✓ Compiled (946 modules)
 GET /api/auth/me 200 in 4609ms
Error: Route "/api/uploads/session/[sessionId]" used `params.sessionId`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at GET (app/api/uploads/session/[sessionId]/route.ts:15:30)
  13 |     }
  14 |
> 15 |     const sessionId = params.sessionId;
     |                              ^
  16 |
  17 |     // Get session
  18 |     const sessionResult = await query(
 GET /api/uploads/session/a172debc-fb30-4026-8f44-7f3e7df79555 200 in 4801ms
